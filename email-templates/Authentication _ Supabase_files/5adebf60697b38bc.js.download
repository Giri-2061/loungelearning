;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ea0251cb-f0b2-e9e0-2480-d51446b0c47a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,888525,760255,284399,e=>{"use strict";var t=e.i(355901),r=e.i(714403),a=e.i(392491);function s(e=[]){return{hypopg:e.find(e=>"hypopg"===e.name),indexAdvisor:e.find(e=>"index_advisor"===e.name)}}function i(e,t){return void 0===e||void 0===t||e<=0||e<=t?0:(e-t)/e*100}async function n({projectRef:e,connectionString:a,indexStatements:s,onSuccess:i,onError:n}){if(!e){let e=Error("Project ref is required");return n&&n(e),Promise.reject(e)}if(0===s.length){let e=Error("No index statements provided");return n&&n(e),Promise.reject(e)}try{return await (0,r.executeSql)({projectRef:e,connectionString:a,sql:s.join(";\n")+";"}),t.toast.success("Successfully created index"),i&&i(),Promise.resolve()}catch(e){return t.toast.error(`Failed to create index: ${e.message}`),n&&n(e),Promise.reject(e)}}function o(e,t){return!!(t&&e?.index_statements&&e.index_statements.length>0)}function l(e){return e&&0!==e.length?e.filter(e=>{let t=e.match(/ON\s+(?:"?(\w+)"?\.|(\w+)\.)/i);if(!t)return!0;let r=t[1]||t[2];return!r||!a.INTERNAL_SCHEMAS.includes(r.toLowerCase())}):[]}function d(e){if(!e||!e.index_statements)return e??null;let t=l(e.index_statements);return 0===t.length?null:{...e,index_statements:t}}function c(e){if(!e)return!1;let t=e.toLowerCase();return a.INTERNAL_SCHEMAS.some(e=>RegExp(`(?:from|join|update|insert\\s+into|delete\\s+from)\\s+(?:${e}\\.|"${e}"\\.)`,"i").test(t))}e.s(["calculateImprovement",()=>i,"createIndexes",()=>n,"filterProtectedSchemaIndexAdvisorResult",()=>d,"filterProtectedSchemaIndexStatements",()=>l,"getIndexAdvisorExtensions",()=>s,"hasIndexRecommendations",()=>o,"queryInvolvesProtectedSchemas",()=>c],760255);var u=e.i(450972),m=e.i(635494);function p(){let{data:e}=(0,m.useSelectedProjectQuery)(),{data:t}=(0,u.useDatabaseExtensionsQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),{hypopg:r,indexAdvisor:a}=s(t??[]),i=!!r&&!!a,n=i&&null!==r.installed_version&&null!==a.installed_version;return{isIndexAdvisorAvailable:i,isIndexAdvisorEnabled:n}}e.s(["useIndexAdvisorStatus",()=>p],888525);var f=e.i(478902),x=e.i(389959),g=e.i(610144),h=e.i(967052),y=e.i(232520),j=e.i(837710);e.s(["EnableIndexAdvisorButton",0,()=>{let e=(0,h.useTrack)(),{data:r}=(0,m.useSelectedProjectQuery)(),[a,i]=(0,x.useState)(!1),{data:n}=(0,u.useDatabaseExtensionsQuery)({projectRef:r?.ref,connectionString:r?.connectionString}),{hypopg:o,indexAdvisor:l}=s(n),{mutateAsync:d,isPending:c}=(0,g.useDatabaseExtensionEnableMutation)(),p=async()=>{if(void 0===r)return t.toast.error("Project is required");try{o?.installed_version===null&&await d({projectRef:r?.ref,connectionString:r?.connectionString,name:o.name,schema:o?.schema??"extensions",version:o.default_version}),l?.installed_version===null&&await d({projectRef:r?.ref,connectionString:r?.connectionString,name:l.name,schema:l?.schema??"extensions",version:l.default_version}),t.toast.success("Successfully enabled Index Advisor!"),i(!1)}catch(e){t.toast.error(`Failed to enable Index Advisor: ${e.message}`)}};return(0,f.jsxs)(y.AlertDialog,{open:a,onOpenChange:()=>i(!a),children:[(0,f.jsx)(y.AlertDialogTrigger,{asChild:!0,children:(0,f.jsx)(j.Button,{type:"primary",onClick:()=>e("index_advisor_banner_enable_button_clicked"),children:"Enable"})}),(0,f.jsxs)(y.AlertDialogContent,{children:[(0,f.jsxs)(y.AlertDialogHeader,{children:[(0,f.jsx)(y.AlertDialogTitle,{children:"Enable Index Advisor"}),(0,f.jsxs)(y.AlertDialogDescription,{children:["This will enable the ",(0,f.jsx)("code",{className:"text-code-inline",children:"index_advisor"})," and"," ",(0,f.jsx)("code",{className:"text-code-inline",children:"hypopg"})," Postgres extensions so Index Advisor can analyse queries and suggest performance-improving indexes."]})]}),(0,f.jsxs)(y.AlertDialogFooter,{children:[(0,f.jsx)(y.AlertDialogCancel,{children:"Cancel"}),(0,f.jsx)(y.AlertDialogAction,{onClick:t=>{t.preventDefault(),p(),e("index_advisor_dialog_enable_button_clicked")},disabled:c,children:c?"Enabling...":"Enable"})]})]})]})}],284399)},298625,e=>{"use strict";var t=e.i(242882),r=e.i(714403),a=e.i(584258);async function s({projectRef:e,connectionString:t},a){let s=`
    select
      s.oid as "id",
      w.fdwname as "name",
      s.srvname as "server_name",
      s.srvoptions as "server_options",
      c.proname as "handler",
      (
        select jsonb_agg(
          jsonb_build_object(
            'id', c.oid::bigint,
            'schema', relnamespace::regnamespace::text,
            'name', c.relname,
            'columns', (
              select jsonb_agg(
                jsonb_build_object(
                  'name', a.attname,
                  'type', pg_catalog.format_type(a.atttypid, a.atttypmod)
                )
              )
              from pg_catalog.pg_attribute a
              where a.attrelid = c.oid and a.attnum > 0 and not a.attisdropped
            ),
            'options', t.ftoptions
          )
        )
        from pg_catalog.pg_class c
        join pg_catalog.pg_foreign_table t on c.oid = t.ftrelid
        where c.oid = any (select t.ftrelid from pg_catalog.pg_foreign_table t where t.ftserver = s.oid)
      ) as "tables"
    from pg_catalog.pg_foreign_server s
    join pg_catalog.pg_foreign_data_wrapper w on s.srvfdw = w.oid
    join pg_catalog.pg_proc c on w.fdwhandler = c.oid;
  `,{result:i}=await (0,r.executeSql)({projectRef:e,connectionString:t,sql:s,queryKey:["fdws"]},a);return i}e.s(["getFDWs",()=>s,"useFDWsQuery",0,({projectRef:e,connectionString:r},{enabled:i=!0,...n}={})=>(0,t.useQuery)({queryKey:a.fdwKeys.list(e),queryFn:({signal:t})=>s({projectRef:e,connectionString:r},t),enabled:i&&void 0!==e,...n})])},450972,e=>{"use strict";var t=e.i(248593),r=e.i(242882),a=e.i(234745),s=e.i(635494);e.i(10429);var i=e.i(837508),n=e.i(667286);async function o({projectRef:e,connectionString:r},s,i){if(!e)throw Error("projectRef is required");let n=new Headers(i);r&&n.set("x-connection-encrypted",r);let{data:o,error:l}=await (0,a.get)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":r,"x-pg-application-name":t.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e}},headers:n,signal:s});return l&&(0,a.handleError)(l),o}e.s(["useDatabaseExtensionsQuery",0,({projectRef:e,connectionString:t},{enabled:a=!0,...l}={})=>{let{data:d}=(0,s.useSelectedProjectQuery)(),c=d?.status===i.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,r.useQuery)({queryKey:n.databaseExtensionsKeys.list(e),queryFn:({signal:r})=>o({projectRef:e,connectionString:t},r),enabled:a&&void 0!==e&&c,...l})}])},12214,e=>{"use strict";var t=e.i(615515);let r=e=>Object.fromEntries(e.map(e=>e.split("=")));function a(e,t){if("wasm_fdw_handler"===e.handlerName){let a=r(t?.server_options??[]);return e.server.options.find(e=>"fdw_package_name"===e.name)?.defaultValue===a.fdw_package_name}return e.handlerName===t?.handler}function s(e){return t.WRAPPERS.find(t=>a(t,e))}e.s(["convertKVStringArrayToJson",0,r,"formatWrapperTables",0,(e,r)=>(e?.tables??[]).map(a=>{let s=0,i=Object.fromEntries(a.options.map(e=>e.split("=")));switch(e.handler){case t.WRAPPER_HANDLERS.STRIPE:s=r?.tables.findIndex(e=>e.options.find(e=>"object"===e.name)?.defaultValue===i.object)??0;break;case t.WRAPPER_HANDLERS.FIREBASE:s="auth/users"===i.object?r?.tables.findIndex(e=>e.options.find(e=>"auth/users"===e.defaultValue))??0:r?.tables.findIndex(e=>"Firestore Collection"===e.label)??0;case t.WRAPPER_HANDLERS.S3:case t.WRAPPER_HANDLERS.AIRTABLE:case t.WRAPPER_HANDLERS.LOGFLARE:case t.WRAPPER_HANDLERS.BIG_QUERY:case t.WRAPPER_HANDLERS.CLICK_HOUSE:}return{...i,index:s,id:a.id,columns:a.columns,is_new_schema:!1,schema:a.schema,schema_name:a.schema,table_name:a.name}}),"getWrapperMetaForWrapper",()=>s,"makeValidateRequired",0,e=>{let t=new Set(e.filter(e=>e.required).map(e=>e.name)),r=new Set(Array.from(t).filter(e=>e.includes("."))),a=Array.from(r);return e=>Object.fromEntries(Object.entries(e).flatMap(([e,t])=>Array.isArray(t)?[[e,t],...t.map((t,r)=>[`${e}.${r}`,t])]:[[e,t]]).filter(([e,s])=>{let[i,n]=e.split(".");if(void 0!==n&&t.has(i)&&Object.keys(s).some(e=>r.has(`${i}.${e}`))){let e=a.find(e=>e.startsWith(`${i}.`));return!!e&&!s[e.split(".")[1]]}return t.has(i)&&(Array.isArray(s)?s.length<1:!s)}).map(([e])=>"table_name"===e?[e,"Please provide a name for your table"]:"columns"===e?[e,"Please select at least one column"]:[e,"This field is required"]))},"wrapperMetaComparator",()=>a])},584258,e=>{"use strict";e.s(["fdwKeys",0,{list:e=>["projects",e,"fdws"]}])},610144,e=>{"use strict";var t=e.i(755216),r=e.i(479084),a=e.i(38429),s=e.i(356003),i=e.i(355901),n=e.i(78162),o=e.i(714403),l=e.i(667286);async function d({projectRef:e,connectionString:a,schema:s,name:i,version:n,cascade:l=!1,createSchema:d=!1}){let c=new Headers;a&&c.set("x-connection-encrypted",a);let{sql:u}=t.default.extensions.create({schema:s,name:i,version:n,cascade:l}),{result:m}=await (0,o.executeSql)({projectRef:e,connectionString:a,sql:d?`create schema if not exists ${(0,r.ident)(s)}; ${u}`:u,queryKey:["extension","create"]});return m}e.s(["useDatabaseExtensionEnableMutation",0,({onSuccess:e,onError:t,...r}={})=>{let o=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>d(e),async onSuccess(t,r,a){let{projectRef:s}=r;await Promise.all([o.invalidateQueries({queryKey:l.databaseExtensionsKeys.list(s)}),o.invalidateQueries({queryKey:n.configKeys.upgradeEligibility(s)})]),await e?.(t,r,a)},async onError(e,r,a){void 0===t?i.toast.error(`Failed to enable database extension: ${e.message}`):t(e,r,a)},...r})}])},232520,e=>{"use strict";var t=e.i(478902),r=e.i(389959),a=e.i(274664),s=e.i(678001),i=e.i(217027),n=e.i(174617),o=e.i(153545),l="AlertDialog",[d,c]=(0,a.createContextScope)(l,[i.createDialogScope]),u=(0,i.createDialogScope)(),m=e=>{let{__scopeAlertDialog:r,...a}=e,s=u(r);return(0,t.jsx)(i.Root,{...s,...a,modal:!0})};m.displayName=l;var p=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=u(a);return(0,t.jsx)(i.Trigger,{...n,...s,ref:r})});p.displayName="AlertDialogTrigger";var f=e=>{let{__scopeAlertDialog:r,...a}=e,s=u(r);return(0,t.jsx)(i.Portal,{...s,...a})};f.displayName="AlertDialogPortal";var x=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=u(a);return(0,t.jsx)(i.Overlay,{...n,...s,ref:r})});x.displayName="AlertDialogOverlay";var g="AlertDialogContent",[h,y]=d(g),j=(0,o.createSlottable)("AlertDialogContent"),v=r.forwardRef((e,a)=>{let{__scopeAlertDialog:o,children:l,...d}=e,c=u(o),m=r.useRef(null),p=(0,s.useComposedRefs)(a,m),f=r.useRef(null);return(0,t.jsx)(i.WarningProvider,{contentName:g,titleName:b,docsSlug:"alert-dialog",children:(0,t.jsx)(h,{scope:o,cancelRef:f,children:(0,t.jsxs)(i.Content,{role:"alertdialog",...c,...d,ref:p,onOpenAutoFocus:(0,n.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(j,{children:l}),(0,t.jsx)(C,{contentRef:m})]})})})});v.displayName=g;var b="AlertDialogTitle",w=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=u(a);return(0,t.jsx)(i.Title,{...n,...s,ref:r})});w.displayName=b;var S="AlertDialogDescription",N=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=u(a);return(0,t.jsx)(i.Description,{...n,...s,ref:r})});N.displayName=S;var _=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...s}=e,n=u(a);return(0,t.jsx)(i.Close,{...n,...s,ref:r})});_.displayName="AlertDialogAction";var A="AlertDialogCancel",D=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,{cancelRef:o}=y(A,a),l=u(a),d=(0,s.useComposedRefs)(r,o);return(0,t.jsx)(i.Close,{...l,...n,ref:d})});D.displayName=A;var C=({contentRef:e})=>{let t=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${S}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},R=e.i(709520),E=e.i(843778),P=e.i(837710);let I=({children:e,...r})=>(0,t.jsx)(f,{...r,children:(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:e})});I.displayName=f.displayName;let k=r.forwardRef(({className:e,centered:r=!0,...a},s)=>(0,t.jsx)(x,{ref:s,className:(0,E.cn)("bg-black/40 backdrop-blur-sm","z-50 fixed inset-0 grid place-items-center overflow-y-auto data-closed:animate-overlay-hide py-8",!r&&"flex flex-col flex-start pb-8 sm:pt-12 md:pt-20 lg:pt-32 xl:pt-40 px-5",e),...a}));k.displayName=x.displayName;let T=(0,R.cva)((0,E.cn)("relative z-50 w-full max-w-screen border shadow-md dark:shadow-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-[0%] data-[state=closed]:slide-out-to-top-[0%]","data-[state=open]:slide-in-from-left-[0%] data-[state=open]:slide-in-from-top-[0%]","sm:rounded-lg md:w-full","bg-dash-sidebar"),{variants:{size:{tiny:"sm:align-middle sm:w-full sm:max-w-xs",small:"sm:align-middle sm:w-full sm:max-w-sm",medium:"sm:align-middle sm:w-full sm:max-w-lg",large:"sm:align-middle sm:w-full md:max-w-xl",xlarge:"sm:align-middle sm:w-full md:max-w-3xl",xxlarge:"sm:align-middle sm:w-full md:max-w-6xl",xxxlarge:"sm:align-middle sm:w-full md:max-w-7xl"}},defaultVariants:{size:"small"}}),M=r.forwardRef(({className:e,children:r,size:a,dialogOverlayProps:s,centered:i=!0,...n},o)=>(0,t.jsx)(I,{children:(0,t.jsx)(k,{centered:i,...s,children:(0,t.jsx)(v,{ref:o,className:(0,E.cn)(T({size:a}),e),...n,children:r})})}));M.displayName=v.displayName;let B=({className:e,...r})=>(0,t.jsx)("div",{className:(0,E.cn)("flex flex-col text-left",e),...r});B.displayName="AlertDialogHeader";let L=({className:e,...r})=>(0,t.jsx)("div",{className:(0,E.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 border-t py-3 px-5",e),...r});L.displayName="AlertDialogFooter";let F=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(w,{ref:a,className:(0,E.cn)("text-base text-foreground border-b px-5 py-3",e),...r}));F.displayName=w.displayName;let O=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(N,{ref:a,className:(0,E.cn)("text-sm text-foreground-light px-5"," pt-3.5 pb-4",e),...r}));O.displayName=N.displayName;let $=r.forwardRef(({className:e,variant:r="primary",type:a="button",...s},i)=>(0,t.jsx)(_,{ref:i,type:a,className:(0,E.cn)((0,P.buttonVariants)({type:r,size:"tiny"}),e),...s}));$.displayName=_.displayName;let q=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(D,{ref:a,className:(0,E.cn)((0,P.buttonVariants)({type:"default",size:"tiny"}),"mt-2 sm:mt-0",e),...r}));q.displayName=D.displayName,e.s(["AlertDialog",()=>m,"AlertDialogAction",()=>$,"AlertDialogCancel",()=>q,"AlertDialogContent",()=>M,"AlertDialogDescription",()=>O,"AlertDialogFooter",()=>L,"AlertDialogHeader",()=>B,"AlertDialogTitle",()=>F,"AlertDialogTrigger",()=>p],232520)},582391,e=>{"use strict";let t=(0,e.i(388019).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],582391)},670447,470754,291653,e=>{"use strict";var t=e.i(478902),r=e.i(975924),a=e.i(837710),s=e.i(627069),i=e.i(843778),n=e.i(10429);e.s(["BannerCard",0,({onDismiss:e,children:o,className:l})=>(0,t.jsxs)(s.Card,{className:(0,i.cn)("relative overflow-hidden shadow-lg rounded-2xl",l),children:[(0,t.jsxs)("div",{className:"absolute -inset-16 z-0 opacity-100 pointer-events-none",children:[(0,t.jsx)("img",{src:`${n.BASE_PATH}/img/reports/bg-grafana-dark.svg`,alt:"Background pattern",className:"w-full h-full object-cover object-right hidden dark:block"}),(0,t.jsx)("img",{src:`${n.BASE_PATH}/img/reports/bg-grafana-light.svg`,alt:"Background pattern",className:"w-full h-full object-cover object-right dark:hidden"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-background-alternative to-transparent"})]}),(0,t.jsxs)(s.CardContent,{className:"relative z-10 p-6",children:[e&&(0,t.jsx)("div",{className:"absolute top-4 right-4 z-20",children:(0,t.jsx)(a.Button,{type:"text",size:"tiny",htmlType:"button",icon:(0,t.jsx)(r.X,{size:16,strokeWidth:1.5}),onClick:t=>{t.preventDefault(),e()},className:"opacity-75 hover:opacity-100 px-1","aria-label":"Close banner"})}),o]})]})],670447);var o=e.i(389959);let l=(0,o.createContext)(void 0),d=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useBannerStack must be used within BannerStackProvider");return e};e.s(["BannerStackProvider",0,({children:e})=>{let[r,a]=(0,o.useState)([]),s=(0,o.useCallback)(e=>{a(t=>t.some(t=>t.id===e.id)?t:[...t,e].sort((e,t)=>(t.priority??0)-(e.priority??0)))},[]),i=(0,o.useCallback)(e=>{a(t=>t.map(t=>t.id===e?{...t,isDismissed:!0}:t)),setTimeout(()=>{a(t=>t.filter(t=>t.id!==e))},300)},[]);return(0,t.jsx)(l.Provider,{value:{banners:r,addBanner:s,dismissBanner:i},children:e})},"useBannerStack",0,d],470754);var c=e.i(265100),u=e.i(809323);e.s(["BannerStack",0,()=>{let{banners:e}=d(),[r,a]=(0,o.useState)(!1),s=e.filter(e=>!e.isDismissed);return 0===s.length?null:(0,t.jsx)(c.motion.div,{className:"fixed bottom-4 right-4 z-50",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),animate:{y:r?-8:0},transition:{type:"spring",stiffness:300,damping:25},children:(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(u.AnimatePresence,{mode:"popLayout",children:s.map((e,n)=>{let o=0===n,l=s.length-1-n;return(0,t.jsx)(c.motion.div,{initial:{opacity:0,scale:.99,y:8},animate:{opacity:1,scale:r?1:1-.07*n,x:0,y:r?-(216*n):-(4*n)},exit:{opacity:0,scale:.99,y:8},transition:{type:"spring",stiffness:300,damping:30,delay:.25},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),style:{position:o?"relative":"absolute",bottom:o?void 0:0,right:o?void 0:0,zIndex:30+l,transformOrigin:"center bottom"},className:(0,i.cn)("w-full max-w-72",!r&&0===n&&"pointer-events-none"),children:e.content},e.id)})})})})}],291653)},929461,e=>{"use strict";var t=e.i(242882),r=e.i(234745),a=e.i(718727);async function s({projectRef:e,type:t,name:a,limit:s=10},i){if(void 0===e)throw Error("projectRef is required for getContent");let{data:n,error:o}=await (0,r.get)("/platform/projects/{ref}/content",{params:{path:{ref:e},query:{type:t,name:a,limit:s.toString()}},signal:i});return o&&(0,r.handleError)(o),{cursor:n.cursor,content:n.data}}e.s(["useContentQuery",0,({projectRef:e,type:r,name:i,limit:n},{enabled:o=!0,...l}={})=>(0,t.useQuery)({queryKey:a.contentKeys.list(e,{type:r,name:i,limit:n}),queryFn:({signal:t})=>s({projectRef:e,type:r,name:i,limit:n},t),enabled:o&&void 0!==e,...l})])},586011,e=>{"use strict";var t=e.i(38429),r=e.i(356003),a=e.i(355901),s=e.i(234745),i=e.i(718727);async function n({projectRef:e,ids:t},r){let{data:a,error:i}=await (0,s.del)("/platform/projects/{ref}/content",{headers:{Version:"2"},params:{path:{ref:e},query:{ids:t.join(",")}},signal:r});return i&&(0,s.handleError)(i),a.map(e=>e.id)}e.s(["useContentDeleteMutation",0,({onSuccess:e,onError:s,...o}={})=>{let l=(0,r.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>n(e),async onSuccess(t,r,a){let{projectRef:s}=r;await Promise.all([l.invalidateQueries({queryKey:i.contentKeys.allContentLists(s)}),l.invalidateQueries({queryKey:i.contentKeys.infiniteList(s)})]),await e?.(t,r,a)},async onError(e,t,r){void 0===s?a.toast.error(`Failed to delete contents: ${e.message}`):s(e,t,r)},...o})}])},271332,e=>{"use strict";var t=e.i(478902),r=e.i(389959),a=e.i(843778),s=e.i(837710),i=e.i(253214);let n=(0,r.forwardRef)(({children:e,customFooter:n,description:o,hideFooter:l=!1,alignFooter:d="left",layout:c="horizontal",loading:u=!1,cancelText:m="Cancel",onConfirm:p=()=>{},onCancel:f=()=>{},confirmText:x="Confirm",showCloseButton:g=!0,footerBackground:h,variant:y="success",visible:j=!1,size:v="large",style:b,overlayStyle:w,contentStyle:S,triggerElement:N,header:_,modal:A,defaultOpen:D,...C},R)=>{let[E,P]=r.default.useState(!!j&&j);(0,r.useEffect)(()=>{P(j)},[j]);let I=n||(0,t.jsxs)("div",{className:"flex w-full space-x-2",style:{width:"100%",justifyContent:"vertical"===c?"center":"right"===d?"flex-end":"flex-start"},children:[(0,t.jsx)(s.Button,{type:"default",onClick:f,disabled:u,children:m}),(0,t.jsx)(s.Button,{onClick:p,disabled:u,loading:u,type:"danger"===y?"danger":"warning"===y?"warning":"primary",children:x})]});return(0,t.jsxs)(i.Dialog,{open:E,defaultOpen:D,onOpenChange:function(e){void 0===j||e?P(e):f()},modal:A,children:[N&&(0,t.jsx)(i.DialogTrigger,{children:N}),(0,t.jsxs)(i.DialogContent,{ref:R,hideClose:!g,...C,size:v,children:[_||o?(0,t.jsxs)(i.DialogHeader,{className:(0,a.cn)("border-b"),padding:"small",children:[_&&(0,t.jsx)(i.DialogTitle,{children:_}),o&&(0,t.jsx)(i.DialogDescription,{children:o})]}):null,e,!l&&(0,t.jsx)(i.DialogFooter,{padding:"small",children:I})]})]})}),o=(0,r.forwardRef)(({...e},r)=>(0,t.jsx)(i.DialogSection,{ref:r,...e,padding:"small",className:(0,a.cn)(e.className)})),l=(0,r.forwardRef)(({...e},r)=>(0,t.jsx)(i.DialogSectionSeparator,{ref:r,...e}));n.Content=o,n.Separator=l,e.s(["default",0,n])},40892,e=>{"use strict";var t=e.i(271332);e.s(["Modal",()=>t.default])},441345,e=>{"use strict";var t=e.i(343563);e.s(["Form",()=>t.default])},95069,e=>{"use strict";let t=(0,e.i(388019).default)("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);e.s(["ChevronsDown",()=>t],95069)},498377,e=>{"use strict";var t=e.i(478902),r=e.i(416050),a=e.i(95069),s=e.i(774803),i=e.i(366652),n=e.i(215261),o=e.i(389959),l=e.i(774234),d=e.i(554855),c=e.i(925282),u=e.i(874311),m=e.i(378277);e.i(903248);var p=e.i(613580),f=e.i(792459),x=e.i(843778);e.i(108151);let g=(0,o.forwardRef)(({...e},r)=>(0,t.jsx)(c.Collapsible_Shadcn_,{ref:r,...e,className:(0,x.cn)("w-full px-2 group",e.className)})),h=(0,o.forwardRef)(({...e},a)=>(0,t.jsxs)(d.CollapsibleTrigger_Shadcn_,{ref:a,...e,className:(0,x.cn)("w-full flex gap-1 items-center group px-3 text-sm font-normal font-mono uppercase text-lighter tracking-wide",e.className),children:[(0,t.jsx)(r.ChevronRight,{className:"transition-all text-foreground-muted group-data-[state=open]:rotate-90",size:16,strokeWidth:1.5}),(0,t.jsx)("span",{className:"group-hover:not-disabled:text-foreground",children:e.title})]})),y=(0,o.forwardRef)(({...e},r)=>(0,t.jsx)(l.CollapsibleContent_Shadcn_,{ref:r,...e,className:(0,x.cn)("w-full flex flex-col gap-0",e.className)})),j=(0,o.forwardRef)((e,r)=>(0,t.jsx)("div",{ref:r,...e,className:(0,x.cn)("h-px bg-border-muted",e.className)})),v=(0,o.forwardRef)(({className:e,isActive:r,forceHoverState:a,...s},i)=>(0,t.jsx)(n.default,{ref:i,...s,"aria-current":r,className:(0,x.cn)("text-sm","h-7 pl-3 pr-2","flex items-center justify-between rounded-md group relative",r?"bg-selection":"hover:bg-surface-200",a&&"bg-surface-200",r?"text-foreground":"text-foreground-light hover:text-foreground",e)})),b=(0,o.forwardRef)(({isActive:e=!0,forceHoverState:r,isPreview:a,isOpened:s=!0,...i},o)=>(0,t.jsxs)(n.default,{ref:o,...i,"aria-current":e,className:(0,x.cn)((0,f.TreeViewItemVariant)({isSelected:e&&!a,isOpened:s&&!a,isPreview:a}),"px-4",i.className),children:[!a&&e&&(0,t.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),i.children]})),w=(0,o.forwardRef)((e,r)=>(0,t.jsx)("div",{ref:r,...e,className:(0,x.cn)("flex px-2 gap-2 items-center",e.className)})),S=(0,o.forwardRef)(({children:e,isLoading:r=!1,...a},n)=>(0,t.jsxs)("label",{htmlFor:a.name,className:"relative w-full",children:[(0,t.jsx)("span",{className:"sr-only",children:a["aria-labelledby"]}),(0,t.jsx)(m.Input_Shadcn_,{ref:n,type:"text",className:(0,x.cn)("h-[32px] md:h-[28px] w-full","text-base md:text-xs","pl-7","pr-7","w-full","rounded",a.className),...a}),e,r?(0,t.jsx)(s.Loader2,{className:"animate-spin absolute left-2 text-foreground-muted",style:{top:7},size:14,strokeWidth:1.5}):(0,t.jsx)(i.Search,{className:"absolute left-2 top-0 bottom-0 my-auto text-foreground-muted",size:14,strokeWidth:1.5})]})),N=(0,o.forwardRef)(({value:e,onValueChange:r,contentClassName:s,triggerClassName:i,...n},o)=>(0,t.jsxs)(u.DropdownMenu,{modal:!1,children:[(0,t.jsxs)(p.Tooltip,{delayDuration:0,children:[(0,t.jsx)(u.DropdownMenuTrigger,{asChild:!0,className:(0,x.cn)("absolute right-1 top-[.4rem] md:top-[.3rem]","text-foreground transition-colors hover:text-foreground data-[state=open]:text-foreground",i),children:(0,t.jsx)(p.TooltipTrigger,{children:(0,t.jsx)(a.ChevronsDown,{size:18,strokeWidth:1})})}),(0,t.jsx)(p.TooltipContent,{side:"bottom",children:"Sort By"})]}),(0,t.jsx)(u.DropdownMenuContent,{side:"bottom",align:"end",className:(0,x.cn)("w-48",s),children:(0,t.jsx)(u.DropdownMenuRadioGroup,{value:e,onValueChange:r,children:n.children})})]})),_=(0,o.forwardRef)((e,r)=>(0,t.jsx)(u.DropdownMenuRadioItem,{ref:r,...e})),A=(0,o.forwardRef)(({illustration:e,title:r,description:a,actions:s,...i},n)=>(0,t.jsx)("div",{ref:n,...i,className:(0,x.cn)("border border-muted bg-surface-100 dark:bg-surface-75 flex flex-col gap-y-3 items-center justify-center rounded-md px-5 py-4",i.className),children:(0,t.jsxs)("div",{className:"w-full flex flex-col gap-y-1 items-center",children:[e,r&&(0,t.jsx)("p",{className:"text-xs text-foreground-light",children:r}),a&&(0,t.jsx)("p",{className:"text-xs text-foreground-lighter text-center",children:a}),s&&(0,t.jsx)("div",{className:"mt-2",children:s}),i.children]})}));e.s(["InnerSideBarEmptyPanel",()=>A,"InnerSideBarFilterSearchInput",()=>S,"InnerSideBarFilterSortDropdown",()=>N,"InnerSideBarFilterSortDropdownItem",()=>_,"InnerSideBarFilters",()=>w,"InnerSideMenuCollapsible",()=>g,"InnerSideMenuCollapsibleContent",()=>y,"InnerSideMenuCollapsibleTrigger",()=>h,"InnerSideMenuDataItem",()=>b,"InnerSideMenuItem",()=>v,"InnerSideMenuSeparator",()=>j])},223173,674742,843819,928253,993032,e=>{"use strict";var t=e.i(478902);e.i(481541);var r=e.i(126200);e.s(["Datadog",()=>r.default],674742);var r=r,a=e.i(841231);e.s(["Grafana",()=>a.default],843819);var a=a,s=e.i(660253);e.s(["Sentry",()=>s.default],928253);var s=s;let i=(0,e.i(388019).default)("Braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]);e.s(["BracesIcon",()=>i],993032);let n={height:24,width:24,className:"text-foreground-light"},o=[{value:"webhook",name:"Custom Endpoint",description:"Forward logs as a POST request to a custom HTTP endpoint",icon:(0,t.jsx)(i,{...n})},{value:"datadog",name:"Datadog",description:"Datadog is a monitoring service for cloud-scale applications",icon:(0,t.jsx)(r.default,{...n,fill:"currentColor",strokeWidth:0})},{value:"loki",name:"Loki",description:"Loki is an open-source log aggregation system designed to store and query logs from multiple sources",icon:(0,t.jsx)(a.default,{...n,fill:"currentColor",strokeWidth:0})},{value:"sentry",name:"Sentry",description:"Sentry is an application monitoring service that helps developers identify and debug performance issues and errors",icon:(0,t.jsx)(s.default,{...n,fill:"currentColor",strokeWidth:0})}];o.map(e=>e.value),e.s(["DATADOG_REGIONS",0,[{label:"AP1",value:"AP1"},{label:"AP2",value:"AP2"},{label:"EU",value:"EU"},{label:"US1",value:"US1"},{label:"US1-FED",value:"US1-FED"},{label:"US3",value:"US3"},{label:"US5",value:"US5"}],"LOG_DRAIN_TYPES",0,o],223173)},303213,e=>{"use strict";var t=e.i(478902),r=e.i(898452),a=e.i(389959),s=e.i(355901),i=e.i(420985),n=e.i(635494),o=e.i(48189),l=e.i(432478),d=e.i(837710),c=e.i(441345),u=e.i(171997),m=e.i(40892);e.s(["CreateReportModal",0,({visible:e,onCancel:p,afterSubmit:f})=>{let x=(0,r.useRouter)(),{profile:g}=(0,l.useProfile)(),{data:h}=(0,n.useSelectedProjectQuery)(),y=h?.ref??"default",j=(0,a.useMemo)(()=>{let{its:e,ite:t,isHelper:r,helperText:a}=x.query,s=new URLSearchParams;e&&"string"==typeof e&&s.set("its",e),t&&"string"==typeof t&&s.set("ite",t),r&&"string"==typeof r&&s.set("isHelper",r),a&&"string"==typeof a&&s.set("helperText",a);let i=s.toString();return i?`?${i}`:""},[x.query]),{mutate:v,isPending:b}=(0,i.useContentUpsertMutation)({onSuccess:(e,t)=>{s.toast.success("Successfully created new report");let r=t.payload.id;x.push(`/project/${y}/observability/${r}${j}`),f()},onError:e=>{s.toast.error(`Failed to create report: ${e.message}`)}});async function w({name:e,description:t}){return y?g?void v({projectRef:y,payload:{id:(0,o.uuidv4)(),type:"report",name:e,description:t||"",visibility:"project",owner_id:g?.id,content:{schema_version:1,period_start:{time_period:"7d",date:""},period_end:{time_period:"today",date:""},interval:"1d",layout:[]}}}):console.error("Profile is required"):console.error("Project ref is required")}return(0,t.jsx)(m.Modal,{visible:e,onCancel:p,hideFooter:!0,header:"Create a custom report",size:"small",children:(0,t.jsx)(c.Form,{onReset:p,validateOnBlur:!0,initialValues:{name:"",description:""},validate:e=>{let t={};return e.name||(t.name="Required"),t},onSubmit:e=>w(e),children:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m.Modal.Content,{className:"space-y-4",children:[(0,t.jsx)(u.Input,{label:"Name",id:"name",name:"name"}),(0,t.jsx)(u.Input.TextArea,{label:"Description",id:"description",placeholder:"Describe your custom report",size:"medium",textAreaClassName:"resize-none"})]}),(0,t.jsx)(m.Modal.Separator,{}),(0,t.jsxs)(m.Modal.Content,{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(d.Button,{htmlType:"reset",type:"default",onClick:p,disabled:b,children:"Cancel"}),(0,t.jsx)(d.Button,{htmlType:"submit",loading:b,disabled:b,children:"Create report"})]})]})})})}])},350106,e=>{"use strict";var t=e.i(478902);e.i(69870);var r=e.i(158639),a=e.i(670447),s=e.i(967052),i=e.i(124416);e.i(128328);var n=e.i(947748),o=e.i(587433),l=e.i(223173),d=e.i(389959),c=e.i(837710),u=e.i(215261),m=e.i(10429),p=e.i(470754);e.s(["BannerMetricsAPI",0,()=>{let{ref:e}=(0,r.useParams)(),f=(0,s.useTrack)(),{dismissBanner:x}=(0,p.useBannerStack)(),[,g]=(0,i.useLocalStorageQuery)(n.LOCAL_STORAGE_KEYS.OBSERVABILITY_BANNER_DISMISSED(e??""),!1);return(0,t.jsx)(a.BannerCard,{onDismiss:()=>{g(!0),x("metrics-api-banner"),f("metrics_api_banner_dismiss_button_clicked")},children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-2 items-start",children:[(0,t.jsx)(o.Badge,{variant:"success",className:"-ml-0.5 uppercase inline-flex items-center mb-2",children:"Beta"}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:l.LOG_DRAIN_TYPES.filter(e=>"sentry"!==e.value).map(e=>(0,t.jsx)(d.default.Fragment,{children:d.default.cloneElement(e.icon,{height:20,width:20})},e.value))})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1 mb-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Export Metrics to your dashboards"}),(0,t.jsx)("p",{className:"text-xs text-foreground-lighter text-balance",children:"Visualize over 200 database performance and health metrics with our Metrics API."})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(c.Button,{type:"default",size:"tiny",asChild:!0,children:(0,t.jsx)(u.default,{href:`${m.DOCS_URL}/guides/telemetry/metrics`,target:"_blank",onClick:()=>f("metrics_api_banner_cta_button_clicked"),children:"Get started for free"})})})]})})}])},212846,e=>{"use strict";var t=e.i(478902),r=e.i(389959);e.i(128328);var a=e.i(158639),s=e.i(947748),i=e.i(86086),n=e.i(902780),o=e.i(912793),l=e.i(951138),d=e.i(124416),c=e.i(350106),u=e.i(825713),m=e.i(902858),p=e.i(479232),f=e.i(215261),x=e.i(898452),g=e.i(355901),h=e.i(657588),y=e.i(10429),j=e.i(303213),v=e.i(420985),b=e.i(837710),w=e.i(441345),S=e.i(171997),N=e.i(40892);let _=({selectedReport:e,initialValues:r,onCancel:s})=>{let{ref:i}=(0,a.useParams)(),{mutate:n,isPending:o}=(0,v.useContentUpsertMutation)({onSuccess:()=>{g.toast.success("Successfully updated report"),s()},onError:e=>{g.toast.error(`Failed to update report: ${e.message}`)}});return(0,t.jsx)(N.Modal,{visible:void 0!==e,onCancel:s,hideFooter:!0,header:"Update custom report",size:"small",children:(0,t.jsx)(w.Form,{onReset:s,validateOnBlur:!0,initialValues:r,validate:function(e){let t={};return e.name||(t.name="This field is required"),t},onSubmit:t=>i?e&&e.id?void(e.project_id&&n({projectRef:i,payload:{...e,owner_id:e.owner_id,project_id:e.project_id,id:e.id,name:t.name,description:t.description||""}})):void 0:console.error("Project ref is required"),children:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Modal.Content,{children:(0,t.jsx)(S.Input,{label:"Name",id:"name",name:"name"})}),(0,t.jsx)(N.Modal.Content,{children:(0,t.jsx)(S.Input.TextArea,{label:"Description",id:"description",placeholder:"Describe your custom report",size:"medium",textAreaClassName:"resize-none"})}),(0,t.jsx)(N.Modal.Separator,{}),(0,t.jsxs)(N.Modal.Content,{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(b.Button,{htmlType:"reset",type:"default",onClick:s,disabled:o,children:"Cancel"}),(0,t.jsx)(b.Button,{htmlType:"submit",loading:o,disabled:o,children:"Save custom report"})]})]})})})};var A=e.i(215312),D=e.i(586011),C=e.i(929461),R=e.i(2579),E=e.i(432478),P=e.i(862326),I=e.i(843778),k=e.i(498377),T=e.i(466472),M=e.i(108151),B=e.i(582391),L=e.i(211570),F=e.i(471998),O=e.i(874311);let $=({item:e,pageKey:r,onSelectEdit:a,onSelectDelete:s})=>{let{profile:i}=(0,E.useProfile)(),{can:n}=(0,R.useAsyncCheckPermissions)(m.PermissionAction.UPDATE,"user_content",{resource:{type:"report",visibility:e.report.visibility,owner_id:e.report.owner_id},subject:{id:i?.id}});return(0,t.jsxs)(f.default,{className:(0,I.cn)("pr-2 h-7 pl-3 mt-1 text-foreground-light group-hover:text-foreground/80 text-sm","flex items-center justify-between rounded-md group relative",e.key===r?"bg-surface-300 text-foreground":"hover:text-foreground"),href:e.url,children:[(0,t.jsx)("div",{children:e.name}),n&&(0,t.jsxs)(O.DropdownMenu,{children:[(0,t.jsx)(O.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{type:"text",className:"px-1 opacity-50 hover:opacity-100",icon:(0,t.jsx)(F.MoreVertical,{size:12,strokeWidth:2}),onClick:e=>{e.preventDefault(),e.stopPropagation()}})}),(0,t.jsxs)(O.DropdownMenuContent,{align:"start",className:"w-32 *:gap-x-2",children:[(0,t.jsxs)(O.DropdownMenuItem,{onClick:t=>{t.preventDefault(),t.stopPropagation(),e.id&&a()},children:[(0,t.jsx)(B.Edit2,{size:12}),(0,t.jsx)("div",{children:"Rename report"})]}),(0,t.jsx)(O.DropdownMenuSeparator,{}),(0,t.jsxs)(O.DropdownMenuItem,{onClick:t=>{t.preventDefault(),t.stopPropagation(),e.id&&s()},children:[(0,t.jsx)(L.Trash,{size:12}),(0,t.jsx)("div",{children:"Delete report"})]})]})]})]},e.key+"-menukey")};var q=e.i(4196);let z=()=>{let e=(0,x.useRouter)(),{profile:s}=(0,E.useProfile)(),{ref:i,id:n}=(0,a.useParams)(),l=n||e.pathname.split("/")[4],d=(0,h.useFlag)("authreportv2"),c=(0,h.useFlag)("edgefunctionreport"),u=(0,h.useFlag)("realtimeReport"),v=(0,h.useFlag)("storagereport"),b=(0,h.useFlag)("postgrestreport"),w=(0,o.useIsFeatureEnabled)("project_storage:all"),{can:S}=(0,R.useAsyncCheckPermissions)(m.PermissionAction.CREATE,"user_content",{resource:{type:"report",owner_id:s?.id},subject:{id:s?.id}}),N=(0,r.useMemo)(()=>{let{its:t,ite:r,isHelper:a,helperText:s}=e.query,i=new URLSearchParams;t&&"string"==typeof t&&i.set("its",t),r&&"string"==typeof r&&i.set("ite",r),a&&"string"==typeof a&&i.set("isHelper",a),s&&"string"==typeof s&&i.set("helperText",s);let n=i.toString();return n?`?${n}`:""},[e.query]),{data:B,isPending:L}=(0,C.useContentQuery)({projectRef:i,type:"report"}),{mutate:F,isPending:O}=(0,D.useContentDeleteMutation)({onSuccess:()=>{K(!1),g.toast.success("Successfully deleted report"),e.push(`/project/${i}/observability`)},onError:e=>{g.toast.error(`Failed to delete report: ${e.message}`)}}),[z,K]=(0,r.useState)(!1),[Q,H]=(0,q.useQueryState)("newReport",q.parseAsBoolean.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),[U,W]=(0,r.useState)(),[V,G]=(0,r.useState)(),Y=function(){if(!B)return[];let e=B?.content.filter(e=>"report"===e.type);return(e?.sort((e,t)=>e.name<t.name?-1:+(e.name>t.name))).map((e,t)=>({id:e.id,name:e.name,description:e.description||"",key:e.id||t+"-report",url:`/project/${i}/observability/${e.id}${N}`,hasDropdownActions:!0,report:e}))}(),X=[{title:"Performance Reports",key:"performance-reports",items:[...y.IS_PLATFORM?[{name:"API Gateway",key:"api-overview",url:`/project/${i}/observability/api-overview${N}`}]:[],{name:"Query Performance",key:"query-performance",url:`/project/${i}/observability/query-performance${N}`},...b?[{name:"Data API",key:"postgrest",url:`/project/${i}/observability/postgrest${N}`}]:[]]},{title:"Product Reports",key:"product-reports",items:[...d?[{name:"Auth",key:"auth",url:`/project/${i}/observability/auth${N}`}]:[],...y.IS_PLATFORM?[{name:"Database",key:"database",url:`/project/${i}/observability/database${N}`}]:[],...c?[{name:"Edge Functions",key:"edge-functions",url:`/project/${i}/observability/edge-functions${N}`}]:[],...u?[{name:"Realtime",key:"realtime",url:`/project/${i}/observability/realtime${N}`}]:[],...v&&w?[{name:"Storage",key:"storage",url:`/project/${i}/observability/storage${N}`}]:[]]}];return(0,t.jsx)(P.Menu,{type:"pills",className:"mt-6",children:L?(0,t.jsxs)("div",{className:"px-5 my-4 space-y-2",children:[(0,t.jsx)(M.ShimmeringLoader,{}),(0,t.jsx)(M.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(M.ShimmeringLoader,{className:"w-1/2"})]}):(0,t.jsxs)("div",{className:"flex flex-col gap-y-6",children:[y.IS_PLATFORM&&(0,t.jsxs)("div",{className:"mx-2",children:[(0,t.jsx)(P.Menu.Group,{title:(0,t.jsxs)("span",{className:"flex w-full items-center justify-between relative h-6",children:[(0,t.jsx)("span",{className:"uppercase font-mono",children:"Custom Reports"}),Y.length>0&&(0,t.jsx)(A.ButtonTooltip,{type:"default",size:"tiny",icon:(0,t.jsx)(p.Plus,{}),disabled:!S,className:"flex items-center justify-center h-6 w-6 absolute top-0 -right-1",onClick:()=>{H(!0)},tooltip:{content:{side:"bottom",text:S?void 0:"You need additional permissions to create custom reports"}}})]})}),0===Y.length?(0,t.jsx)("div",{className:"px-2",children:(0,t.jsx)(k.InnerSideBarEmptyPanel,{title:"No custom reports yet",description:"Create and save custom reports to track your project metrics",actions:(0,t.jsx)(A.ButtonTooltip,{type:"default",icon:(0,t.jsx)(p.Plus,{}),disabled:!S,onClick:()=>{H(!0)},tooltip:{content:{side:"bottom",text:S?void 0:"You need additional permissions to create custom reports"}},children:"New custom report"})})}):(0,t.jsx)(t.Fragment,{children:Y.map(e=>(0,t.jsx)($,{item:e,pageKey:l,onSelectEdit:()=>{G(e.report)},onSelectDelete:()=>{W(e.report),K(!0)}},e.id))})]}),X.map((e,a)=>(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay first:hidden"}),(0,t.jsx)("div",{children:e.items&&e.items.length>0?(0,t.jsxs)("div",{className:"px-2",children:[(0,t.jsx)(P.Menu.Group,{title:(0,t.jsx)("span",{className:"uppercase font-mono",children:e.title})}),(0,t.jsx)("div",{className:"flex flex-col",children:e.items.map(e=>(0,t.jsx)("li",{className:(0,I.cn)("pr-2 mt-1 text-foreground-light group-hover:text-foreground/80 text-sm","flex items-center justify-between rounded-md group relative",e.key===l?"bg-surface-300 text-foreground":"hover:text-foreground"),children:(0,t.jsx)(f.default,{href:e.url,className:"flex-grow h-7 flex justify-between items-center pl-3",children:(0,t.jsx)("span",{children:e.name})})},e.key))},e.key)]}):null})]},a)),(0,t.jsx)(_,{onCancel:()=>G(void 0),selectedReport:V,initialValues:{name:V?.name||"",description:V?.description||""}}),(0,t.jsx)(T.default,{title:"Delete custom report",confirmLabel:"Delete report",confirmLabelLoading:"Deleting report",size:"medium",loading:O,visible:z,onCancel:()=>K(!1),onConfirm:()=>void 0===i?console.error("Project ref is required"):U?.id===void 0?console.error("Report ID is required"):void F({projectRef:i,ids:[U.id]}),children:(0,t.jsx)("div",{className:"text-sm text-foreground-light grid gap-4",children:(0,t.jsx)("div",{className:"grid gap-1",children:(0,t.jsxs)("p",{children:["Are you sure you want to delete '",U?.name,"'?"]})})})}),(0,t.jsx)(j.CreateReportModal,{visible:Q,onCancel:()=>H(!1),afterSubmit:()=>H(!1)})]})})};var K=e.i(470754),Q=e.i(291653),H=e.i(95051),U=e.i(888525);e.i(69870);var W=e.i(284399),V=e.i(967052),G=e.i(924115),Y=e.i(670447);let X=()=>{let e=(0,V.useTrack)(),{ref:r}=(0,a.useParams)(),{dismissBanner:i}=(0,K.useBannerStack)(),[,n]=(0,d.useLocalStorageQuery)(s.LOCAL_STORAGE_KEYS.INDEX_ADVISOR_NOTICE_DISMISSED(r??""),!1);return(0,t.jsx)(Y.BannerCard,{onDismiss:()=>{n(!0),i("index-advisor-banner"),e("index_advisor_banner_dismiss_button_clicked")},children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsx)("div",{className:"flex flex-col gap-y-2 items-start",children:(0,t.jsx)("div",{className:"p-2 rounded-lg bg-warning-300 text-warning",children:(0,t.jsx)(G.Lightbulb,{size:16})})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1 mb-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Enable Index Advisor"}),(0,t.jsx)("p",{className:"text-xs text-foreground-lighter text-balance",children:"Recommends indexes to improve query performance."})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(W.EnableIndexAdvisorButton,{})})]})})},J=({title:e,children:l})=>{let{ref:m}=(0,a.useParams)(),p=(0,H.usePathname)(),{addBanner:f,dismissBanner:x}=(0,K.useBannerStack)(),{isIndexAdvisorAvailable:g,isIndexAdvisorEnabled:h}=(0,U.useIndexAdvisorStatus)(),[y]=(0,d.useLocalStorageQuery)(s.LOCAL_STORAGE_KEYS.OBSERVABILITY_BANNER_DISMISSED(m??""),!1),[j]=(0,d.useLocalStorageQuery)(s.LOCAL_STORAGE_KEYS.INDEX_ADVISOR_NOTICE_DISMISSED(m??""),!1);(0,r.useEffect)(()=>{!y&&i.IS_PLATFORM?f({id:"metrics-api-banner",isDismissed:!1,content:(0,t.jsx)(c.BannerMetricsAPI,{}),priority:1}):x("metrics-api-banner")},[y,f,x]);let v=(0,r.useRef)(p);(0,r.useEffect)(()=>{let e=p?.includes("/query-performance");e&&g&&!h&&!j?f({id:"index-advisor-banner",isDismissed:!1,content:(0,t.jsx)(X,{}),priority:3}):(j||!e||h)&&x("index-advisor-banner"),v.current=p},[p,g,h,j,f,x]);let{reportsAll:b}=(0,o.useIsFeatureEnabled)(["reports:all"]);return b?(0,t.jsx)(u.ProjectLayout,{title:e,product:"Observability",productMenu:(0,t.jsx)(z,{}),isBlocking:!1,children:l}):(0,t.jsx)(n.UnknownInterface,{urlBack:`/project/${m}`})},Z=(0,l.withAuth)(e=>{let{ref:r}=(0,a.useParams)(),{reportsAll:s}=(0,o.useIsFeatureEnabled)(["reports:all"]);return s?(0,t.jsxs)(K.BannerStackProvider,{children:[(0,t.jsx)(J,{...e}),(0,t.jsx)(Q.BannerStack,{})]}):(0,t.jsx)(n.UnknownInterface,{urlBack:`/project/${r}`})});e.s(["default",0,Z],212846)}]);

//# debugId=ea0251cb-f0b2-e9e0-2480-d51446b0c47a
//# sourceMappingURL=0b49f98a61f35382.js.map